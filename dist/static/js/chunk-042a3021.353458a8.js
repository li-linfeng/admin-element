(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-042a3021"],{"35ce":function(t,e,i){},"7d67":function(t,e,i){"use strict";i("35ce")},"9f35":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.showAddDialog}},[t._v(" 增加 ")])],1),i("el-table",{staticStyle:{width:"100%","max-width":"1600px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(n.id))])]}}])}),i("el-table-column",{attrs:{label:"名称",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(n.name))])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.showEditDialog(n)}}},[t._v(" 编辑 ")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteData(n)}}},[t._v(" 删除 ")])]}}])})],1),i("el-dialog",{attrs:{title:"add"==t.dialogAction?"增加":"编辑",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.tmp,"label-position":"left","label-width":"85px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{model:{value:t.tmp.name,callback:function(e){t.$set(t.tmp,"name",e)},expression:"tmp.name"}})],1),i("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[i("el-tree",{ref:"tree",attrs:{data:t.permissions,"show-checkbox":"","node-key":"value","expand-on-click-node":!1}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" 取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"add"==t.dialogAction?t.addData():t.editData()}}},[t._v(" 确认 ")])],1)],1)],1)},s=[],a=i("cc5e"),r=i("0feb"),o={name:"RoleIndex",data:function(){return{list:null,permissions:[],dialogFormVisible:!1,dialogAction:"add",listQuery:{filter_name:""},tmp:{name:"",permissions:[]},rules:{name:[{required:!0,message:"请填写名称",trigger:"change"}],permissions:[{required:!0,message:"请选择权限",trigger:"blur"}]}}},created:function(){var t=this;this.getList(),Object(r["a"])().then((function(e){t.permissions=e.data}))},methods:{getList:function(){var t=this;return Object(a["c"])(this.listQuery).then((function(e){t.list=e.data}))},handleFilter:function(){this.getList()},showAddDialog:function(){var t=this;this.dialogFormVisible=!0,this.dialogAction="add",this.$nextTick((function(){t.$refs.tree.setCheckedKeys([]),t.tmp={name:"",permissions:[]}}))},showEditDialog:function(t){var e=this;this.dialogFormVisible=!0,this.dialogAction="edit",this.$nextTick((function(){e.$refs.tree.setCheckedNodes([]),e.tmp=t;var i=[];for(var n in t.permissions)i.push(t.permissions[n].permission);e.$refs.tree.setCheckedKeys(i)}))},addData:function(){var t=this;this.tmp.permissions=this.$refs.tree.getCheckedNodes(),this.$refs["dataForm"].validate((function(e){e&&Object(a["a"])(t.tmp).then((function(){t.retrieve()}))}))},editData:function(){var t=this;this.tmp.permissions=this.$refs.tree.getCheckedNodes(),this.$refs["dataForm"].validate((function(e){e&&Object(a["d"])(t.tmp.id,t.tmp).then((function(){t.retrieve()}))}))},deleteData:function(t){var e=this;Object(a["b"])(t.id).then((function(t){e.retrieve()}))},retrieve:function(){var t=this;this.getList().then((function(e){t.dialogFormVisible=!1,t.$notify({title:"Success",message:"操作成功",type:"success",duration:2e3})}))}}},l=o,c=(i("7d67"),i("2877")),d=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=d.exports},cc5e:function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a})),i.d(e,"d",(function(){return r})),i.d(e,"b",(function(){return o}));var n=i("b775");function s(t){return Object(n["a"])({url:"/api/roles",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/api/roles",method:"post",data:t})}function r(t,e){return Object(n["a"])({url:"/api/roles/".concat(t),method:"put",data:e})}function o(t){return Object(n["a"])({url:"/api/roles/".concat(t),method:"delete"})}}}]);