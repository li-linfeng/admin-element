(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65aae553"],{"69c6":function(e,t,a){},"78db":function(e,t,a){"use strict";a("69c6")},f4ba:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cate-div"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(" 添加分类 ")])],1),a("el-table",{staticClass:"cate-table",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.data,"row-key":"id",border:"",stripe:"",fit:"","highlight-current-row":"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"编号",sortable:"",width:"300"}}),a("el-table-column",{attrs:{align:"center",label:"分类名",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.label))])],1)]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否存在子分类",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t.row.has_child>0?a("el-tag",{attrs:{size:"medium"}},[e._v(" 是")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.add(i)}}},[e._v(" 添加子分类 ")]),"deleted"!=i.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.remove(i)}}},[e._v(" 删除 ")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"temp",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"名称",prop:"label"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入分类名称"},model:{value:e.temp.label,callback:function(t){e.$set(e.temp,"label",t)},expression:"temp.label"}})],1),a("el-form-item",{attrs:{label:"是否有子分类",prop:"has_child"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.temp.has_child,callback:function(t){e.$set(e.temp,"has_child",t)},expression:"temp.has_child"}},[e._v("是")]),a("el-radio",{attrs:{label:"0",checked:"checked"},model:{value:e.temp.has_child,callback:function(t){e.$set(e.temp,"has_child",t)},expression:"temp.has_child"}},[e._v("否")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(){return e.append(e.temp)}}},[e._v(" 确认 ")])],1)],1)],1)},l=[],n=a("b775");function r(e){return Object(n["a"])({url:"/api/categories",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/api/categories",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/api/categories/".concat(e),method:"delete"})}var c={name:"CategoryIndex",data:function(){return{data:[],dialogFormVisible:!1,temp:{id:0,label:"",has_child:"0",parent_id:0,children:[]},rules:{label:[{required:!0,message:"请输入分类名称",trigger:"blur"}],has_child:[{required:!0,message:"请选择是否有子分类",trigger:"change"}]}}},created:function(){this.getList()},methods:{add:function(e){this.dialogFormVisible=!0,this.node=e},append:function(e){var t=this,a=this.node?this.node.has_child:1;if(0==a)return this.$message({type:"error",message:"此节点不允许添加子分类"}),!0;this.$refs["temp"].validate((function(a){if(!a)return!1;e.parent_id=t.node?t.node.id:0,s(e).then((function(e){t.getList().then((function(e){t.dialogFormVisible=!1}))}))}))},remove:function(e){var t=this;e.children_count>0?this.$alert("此分类具有子分类，确认删除吗","删除分类",{confirmButtonText:"确定",callback:function(a){"cancel"!=a&&t.delCate(e.data.id)}}):this.delCate(e.id)},getList:function(){var e=this;return r().then((function(t){t.data.length>0?e.data=t.data:e.data=[]}))},delCate:function(e){var t=this;o(e).then((function(e){t.getList().then((function(e){t.$message({type:"info",message:"删除成功"})}))}))}}},d=c,u=(a("78db"),a("2877")),m=Object(u["a"])(d,i,l,!1,null,null,null);t["default"]=m.exports}}]);